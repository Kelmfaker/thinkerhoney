<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ - Thinker Honey</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/styles.css">

  <style>
    body {
      font-family: Tahoma, sans-serif;
      background-color: #f8f8f8;
      padding: 20px;
      direction: rtl;
      font-size: 12px;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    form {
      max-width: 600px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
      display: block;
      margin-top: 15px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

     .btn {
    padding: 10px 20px;
    background-color: #2c200f;
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 12px;
    cursor: pointer;
    text-decoration: none;
  }

  .btn:hover {
    background-color: #b02a37;
  }

    .order-summary {
background-color: #2c200f;
    color: white; 
padding: 15px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
            max-width: 600px;
      margin: 0 auto;
  line-height: 1.8; /* â† Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø¬Ù…Ù„ */

    }

    .order-summary h3 {
      margin-bottom: 10px;
    }

    .order-summary p {
      margin: 0;
    }
  </style>
</head>
<body>

  <h1>ğŸ“¦ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</h1>

  <div class="order-summary" id="order-summary">
    <h3>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ù„Ø©:</h3>
    <!-- Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨ Ù‡Ù†Ø§ -->
     
  </div>
  <div class="order-summary" id="order-summary">

<p id="shippingCost"></p>
<p id="finalTotal"></p>
  </div>

  <form onsubmit="submitOrder(event)">
    <label for="name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label>
    <input type="text" id="name" required>

    <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
    <input type="tel" id="phone" required>

    <label for="adresse">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label>
    <input type="text" id="adresse" required>

    <label for="city">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</label>
<select id="city" required>
  <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</option>
  <option value="Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡">Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡</option>
  <option value="Ø§Ù„Ø±Ø¨Ø§Ø·">Ø§Ù„Ø±Ø¨Ø§Ø·</option>
  <option value="ÙØ§Ø³">ÙØ§Ø³</option>
  <option value="Ù…Ø±Ø§ÙƒØ´">Ù…Ø±Ø§ÙƒØ´</option>
  <option value="Ø·Ù†Ø¬Ø©">Ø·Ù†Ø¬Ø©</option>
  <option value="Ø£ÙƒØ§Ø¯ÙŠØ±">Ø£ÙƒØ§Ø¯ÙŠØ±</option>
  <option value="Ù…ÙƒÙ†Ø§Ø³">Ù…ÙƒÙ†Ø§Ø³</option>
  <option value="ÙˆØ¬Ø¯Ø©">ÙˆØ¬Ø¯Ø©</option>
  <option value="ØªØ·ÙˆØ§Ù†">ØªØ·ÙˆØ§Ù†</option>
  <option value="Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</option>
  <option value="Ø¢Ø³ÙÙŠ">Ø¢Ø³ÙÙŠ</option>
  <option value="Ø§Ù„Ù†Ø§Ø¸ÙˆØ±">Ø§Ù„Ù†Ø§Ø¸ÙˆØ±</option>
  <option value="Ø§Ù„Ù‚Ù†ÙŠØ·Ø±Ø©">Ø§Ù„Ù‚Ù†ÙŠØ·Ø±Ø©</option>
  <option value="Ø®Ø±ÙŠØ¨ÙƒØ©">Ø®Ø±ÙŠØ¨ÙƒØ©</option>
  <option value="Ø¨Ù†ÙŠ Ù…Ù„Ø§Ù„">Ø¨Ù†ÙŠ Ù…Ù„Ø§Ù„</option>
  <option value="ØªØ§Ø²Ø©">ØªØ§Ø²Ø©</option>
  <option value="ØªØ§Ø±ÙˆØ¯Ø§Ù†Øª">ØªØ§Ø±ÙˆØ¯Ø§Ù†Øª</option>
  <option value="Ø³Ù„Ø§">Ø³Ù„Ø§</option>
  <option value="Ø§Ù„ØµÙˆÙŠØ±Ø©">Ø§Ù„ØµÙˆÙŠØ±Ø©</option>
  <option value="Ø§Ù„Ø¹ÙŠÙˆÙ†">Ø§Ù„Ø¹ÙŠÙˆÙ†</option>
</select>

    <label for="notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
    <input type="text" id="notes">

    <button type="submit" class="btn">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± WhatsApp</button>
      <button class="btn" onclick="window.location.href='cart.html'">Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© </button>

  </form>

 <script>
  const orderData = JSON.parse(localStorage.getItem("lastOrder")) || [];

  function calculateShipping(city, total) {
    if (total >= 500) {
      return 0;
    } else if (city.trim().toLowerCase() === "ÙØ§Ø³") {
      return 15;
    } else {
      return 40;
    }
  }

  function displayOrderSummary() {
    const container = document.getElementById("order-summary");
    container.innerHTML = "";

    if (orderData.length === 0) {
      container.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª.</p>";
      return;
    }

    let html = "<ul>";
    let total = 0;

    orderData.forEach(item => {
      const subtotal = item.price * item.quantity;
      total += subtotal;
      html += `<li>${item.name} Ã— ${item.quantity} = ${subtotal.toFixed(2)} Ø¯Ø±Ù‡Ù…</li>`;
    });

    html += `</ul><p><strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø¯ÙˆÙ† Ø´Ø­Ù†: ${total.toFixed(2)} Ø¯Ø±Ù‡Ù…</strong></p>`;
    container.innerHTML = html;

    const city = document.getElementById("city").value || "";
    const shipping = calculateShipping(city, total);

    document.getElementById("shippingCost").innerText = ` ØªÙƒÙ„ÙØ© Ø§Ù„Ø´Ø­Ù† Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${shipping.toFixed(2)} Ø¯Ø±Ù‡Ù…`;
    document.getElementById("finalTotal").innerHTML = `<strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¹ Ø§Ù„Ø´Ø­Ù†: ${(total + shipping).toFixed(2)} Ø¯Ø±Ù‡Ù…</strong>`;
  }

  document.getElementById("city").addEventListener("change", displayOrderSummary);

  function submitOrder(event) {
    event.preventDefault();

    const name = document.getElementById("name").value;
    const phone = document.getElementById("phone").value;
    const   adresse = document.getElementById("adresse").value;
        const city = document.getElementById("city").value;

    const notes = document.getElementById("notes").value;

    if (orderData.length === 0) {
      alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨.");
      return;
    }

    let message = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Thinker Honey*%0A`;
    message += `ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}%0A`;
    message += `ğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: ${phone}%0A`;
    message += `ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${adresse}%0A`;

    message += `ğŸ™ï¸ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${city}%0A`;
    if (notes) {
      message += `ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${notes}%0A`;
    }
    message += `%0AğŸ›ï¸ *Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:*%0A`;

    let total = 0;
    orderData.forEach(item => {
      const subtotal = item.price * item.quantity;
      total += subtotal;
      message += `- ${item.name} Ã— ${item.quantity} = ${subtotal.toFixed(2)} Dh%0A`;
    });

    const shipping = calculateShipping(city, total);
    const grandTotal = total + shipping;

    message += `%0AğŸšš *Ø§Ù„Ø´Ø­Ù†: ${shipping.toFixed(2)} Dh*`;
    message += `%0AğŸ’° *Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${grandTotal.toFixed(2)} Dh*`;

    const whatsappNumber = "212708318135";
    const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${message}`;

    window.open(whatsappUrl, "_blank");

    localStorage.setItem("orderSent", "true");

    setTimeout(() => {
      window.location.href = "index.html";
    }, 1000);

    localStorage.removeItem('cart');
  }

  displayOrderSummary();
</script>


</body>
</html>